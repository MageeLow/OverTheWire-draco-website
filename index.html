<!DOCTYPE html>
<html>
  <head>
    <title>OverTheWire Warzone</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel=stylesheet type=text/css href="css/bootstrap.css">
    <link rel=stylesheet type=text/css href="css/custom.css">
    <script src="js/jquery.js"></script>
    <script src="js/angular/angular.min.js"></script>
    <script src="js/angular/angular-route.min.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/angular/angular-moment.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/warzone.js"></script>
  </head>
  <body ng-app="warzoneApp">
     <div class="row" ng-controller="retrieveUsernameController">
     <div class="container col-md-2">
	    <div ng-show="user">
		<div class="usernamebox">

		    <div ng-hide="user.name">
		    Connected from {{user.ip}}, unidentified.
		    <div class="registerButtonContainer">
		    <button ng-hide="user.name" class="btn btn-primary btn-lg btn-group-justified" data-toggle="modal" data-target="#registrationModal">Register</button>
		    </div>
		    </div>

		    <div ng-show="user.name">
		    Connected from {{user.ip}}, identified as 
		    <a href="{{user.profile_url}}"><span class="username">{{user.name}}</span></a>
		    </div>
		</div>

	    <div ng-hide="user">
	    <p>Trying to contact backend... </p>
	    <img src="img/spinner.gif">
	    </div>
        </div>
	<div class="navbar navbar-inverse" role="navigation">
          <ul class="nav nav-pills nav-stacked">
	    <li><a href="/#/keys">Keys</a></li>
	    <li><a href="/#/roles">Roles</a></li>
	    <li><a href="/#/help">Help</a></li>
          </ul>
        </div>
    </div>

    <div ng-view></div>
    </div><!-- /.row -->

    <!-- registration modal -->
    <div class="modal fade" id="registrationModal" tabindex="-1" role="dialog" aria-labelledby="registrationModalLabel" aria-hidden="true">
      <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	    <h4 class="modal-title" id="registrationModalLabel">Register warzone account</h4>
	  </div>
	  <div class="modal-body">
	      <iframe frameBorder="0" src="/form.html"></iframe>
	  </div>
	</div>
      </div>
    </div>

  </body>
</html>




